{% load i18n %}
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>{% trans "새 비밀번호 설정" %}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      /* 최소한의 가독성만 위한 베이직 스타일 (프레임워크 미사용) */
      body {
        font-family:
          system-ui,
          -apple-system,
          Arial,
          sans-serif;
        line-height: 1.5;
        margin: 24px;
      }
      .container {
        max-width: 520px;
        margin: 0 auto;
      }
      .field {
        margin: 12px 0;
      }
      .field label {
        display: block;
        font-weight: 600;
        margin-bottom: 6px;
      }
      .help {
        font-size: 0.9em;
        color: #555;
      }
      .errors {
        color: #b00020;
        margin: 8px 0;
      }
      .non-field-errors {
        background: #fff2f2;
        border: 1px solid #f3c2c2;
        padding: 10px;
        margin: 12px 0;
      }
      input[type="email"],
      input[type="text"],
      input[type="password"] {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
      }
      button {
        padding: 10px 14px;
        cursor: pointer;
      }
      .btn-primary {
        background: #1976d2;
        color: white;
        border: 1px solid #1976d2;
      }
      .btn-secondary {
        background: #f5f5f5;
        color: #333;
        border: 1px solid #ccc;
      }
      .actions {
        margin-top: 16px;
        display: flex;
        gap: 8px;
      }
      .links {
        margin-top: 16px;
      }
      .note {
        background: #f7f7f7;
        padding: 10px;
        border: 1px solid #e5e5e5;
        margin-top: 12px;
      }
      .info-message {
        background: #e3f2fd;
        padding: 16px;
        border: 1px solid #bbdefb;
        margin-bottom: 20px;
      }
      .error-message {
        background: #fff2f2;
        padding: 16px;
        border: 1px solid #f3c2c2;
        margin-bottom: 20px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>{% trans "새 비밀번호 설정" %}</h1>

      {% if token_fail %}
      <div class="error-message">
        <p>{% trans "비밀번호 재설정 링크가 만료되었거나 유효하지 않습니다." %}</p>
        <p><a href="{% url 'account_reset_password' %}">{% trans "새로운 재설정 링크 요청하기" %}</a></p>
      </div>
      {% else %}
      <div class="info-message">
        <p>{% trans "새로운 비밀번호를 설정해 주세요." %}</p>
      </div>

      {% if form.non_field_errors %}
      <div class="non-field-errors">{{ form.non_field_errors }}</div>
      {% endif %}

      <form method="post" action="">
        {% csrf_token %}

        <div class="field">
          <label for="{{ form.password1.id_for_label }}">{{ form.password1.label }}</label>
          {{ form.password1 }} {% if form.password1.errors %}
          <div class="errors">{{ form.password1.errors }}</div>
          {% endif %} {% if form.password1.help_text %}
          <div class="help">{{ form.password1.help_text }}</div>
          {% endif %}
        </div>

        <div class="field">
          <label for="{{ form.password2.id_for_label }}">{{ form.password2.label }}</label>
          {{ form.password2 }} {% if form.password2.errors %}
          <div class="errors">{{ form.password2.errors }}</div>
          {% endif %} {% if form.password2.help_text %}
          <div class="help">{{ form.password2.help_text }}</div>
          {% endif %}
        </div>

        <div class="actions">
          <button type="submit" class="btn-primary">{% trans "비밀번호 변경" %}</button>
        </div>
      </form>

      <div class="note">
        <p>{% trans "비밀번호 변경 후 자동으로 로그인됩니다." %}</p>
      </div>
      {% endif %}

      <div class="links">
        <div>
          <a href="{% url 'account_login' %}">{% trans "로그인" %}</a>
        </div>
        <div>
          <a href="{% url 'account_signup' %}">{% trans "회원가입" %}</a>
        </div>
      </div>
    </div>
  </body>
</html>
